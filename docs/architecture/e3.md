# E3 — Trajectory Selection and Commitment Engine

**Claim Type:** architectural_commitment  
**Scope:** Trajectory selection, commitment, and temporal collapse mechanism  
**Depends On:** INV-012 (commitment gates responsibility), [E1](e1.md), [E2](e2.md), [L-space](l_space.md), [residue geometry](residue_geometry.md), [precision control](control_plane.md)  
**Status:** stable  
**Claim ID:** ARC-003
<a id="arc-003"></a>

---

E3 is the component of the Reflective Ethical Engine (REE) responsible for selecting, stabilising, and committing a trajectory through a temporally displaced latent space.  
It is the mechanism by which prediction becomes lived experience.

E3 does **not** select instantaneous actions or perceptual states.  
It selects *trajectories* and determines whether a unitary present (“now”) is constructed at all.

---

## 1. Architectural role

E3 sits downstream of predictive generation (E1, E2) and upstream of action, memory consolidation, and subjective experience.

Its core functions are:

- Selection of a coherent trajectory across predictive depths
- Conditional commitment to that trajectory
- Temporal collapse of displaced predictions into an experienced present
- Enforcement of perceptual corrigibility and ethical constraint

E3 operates only when licensed by global viability and attention signals (see Precision Control).

---

## 2. Inputs and outputs (interface contract)

### Inputs

E3 receives:

- A **temporally displaced latent bundle**  
  \( \mathcal{B}_t = \{ \hat z_k(t+\Delta) \}_{k \in K} \)  
  (see `latent_stack.md`)

- A **precision profile**  
  \( \alpha = \{ \alpha_k \}_{k \in K} \)  
  (see `precision_control.md`)

- A **residue / ethical curvature field**  
  \( \mathcal{R}(\cdot) \)  
  (see `residue_geometry.md`)

- Feasibility and invariant constraints  
  (dynamics, safety, care budget)

- Global affective / viability signals  
  (reward, harm, uncertainty tolerance, kin relevance)

### Outputs

E3 emits:

- A selected trajectory \( \tau^\* \) (or null)
- A **commitment signal**
- Precision escalation or suppression directives
- Action gating / policy parameters
- Intended-action labels for self-impact attribution (feeds post-action comparison)
- Memory write-enable signals

---

## 3. What E3 selects

A **trajectory** \( \tau \) is a path through the displaced latent bundle over a horizon \(H\):

\[
\tau = \big(
a_{t:t+H},
\hat z_{K,\,t:t+H},
\hat o_{t:t+H}
\big)
\]

Trajectories may be generated by:
- fast predictor forward predictions (affordance-level kernels)
- deep predictor forward predictions (narrative / workspace constraints)
- hippocampal replay and braid mechanisms

**Canonical clarification (2026-02-09):** explicit multi-step rollouts are generated by hippocampal systems.
References to fast/deep rollouts should be read as **inputs and constraints** from E2/E1 that seed hippocampal
trajectory generation, not separate rollout engines. E3 does not imagine; it selects and commits.

---

## 4. Selection functional (symbolic)

E3 selects the trajectory that minimises a composite energy functional:

\[
\tau^\* =
\arg\min_{\tau \in \Omega}
\Big[
\lambda_C\,\mathcal{C}(\tau;\alpha)
+ \lambda_R\,\mathcal{R}(\tau)
+ \lambda_F\,\mathcal{F}(\tau)
- \lambda_I\,\mathcal{I}(\tau)
+ \lambda_P\,\mathcal{P}(\tau)
\Big]
\]

Where:

- \( \mathcal{C}(\tau;\alpha) \) — cross-horizon coherence cost  
- \( \mathcal{R}(\tau) \) — residue / ethical curvature cost  
- \( \mathcal{F}(\tau) \) — feasibility and control cost  
- \( \mathcal{I}(\tau) \) — epistemic value (exploration benefit)  
- \( \mathcal{P}(\tau) \) — phase-lock / temporal collapse penalty  

The coefficients \( \lambda \) are modulated by precision and affective state.

---

## 4a. Ethical Cost Term (Legacy vs Current)

<a id="arc-012"></a>
**Claim ID:** ARC-012

Current canonical framing: E3 selection does not require an explicit ethical cost term. Ethical consequence is encoded via residue curvature, mirror modelling, and commitment-gated learning rather than a separate moral module or cost term.

Legacy formulations included an explicit ethical cost term \(M\) in trajectory scoring. That wording is preserved in processed sources and is no longer canonical.

Source: `docs/processed/legacy_tree/REE_CORE.md`

---

## 5. Coherence and depth interaction

Coherence is evaluated both:

- **Within depth**: prediction error weighted by precision
- **Across depth**: agreement between projected representations at different horizons

Deep regime predictors (reward, threat, attachment) bias selection *via precision and scoring*, not semantic overwrite, preserving perceptual corrigibility.

---

## 6. Commitment and temporal collapse

E3 operates in two regimes:

### Exploratory regime
- Multiple trajectories evaluated
- Low action-depth precision
- No phase-locking to motor execution
- No unitary present constructed  
  (see `Default_mode.md`)

### Committed regime
- A single trajectory is stabilised
- Action-depth precision is increased
- Predictions are phase-aligned with motor timing
- A unitary present (“now”) is constructed

Commitment is triggered when a trajectory is:
- sufficiently coherent,
- ethically admissible,
- feasible,
- and licensed by global viability signals.

---

## 7. Precision as control

Precision does not merely tune learning rates.  
It controls whether temporal collapse occurs at all.

- High action-depth precision → lived present
- Balanced precision → sustained exploration
- Misallocated precision → fragmentation or pathological collapse

(see `precision_control.md`)

---

## 8. Failure regimes (E3 pathologies)

Misconfiguration of E3 yields characteristic failure modes:

- **Over-commitment**  
  Excessive temporal collapse → mania, compulsivity

- **Under-commitment**  
  Failure to collapse → indecision, apathy

- **Fragmentation**  
  Competing trajectories → panic, dissociation

- **False coherence**  
  Deep regime overwrite → psychosis-like states

These are architectural regime failures, not simple parameter errors.

---

## 9. Summary

E3 is the engine that turns prediction into experience.

It:
- selects trajectories, not moments,
- constructs the present conditionally,
- enforces ethical and perceptual constraint,
- and grounds selfhood in the sustained act of commitment under uncertainty.

Without E3, REE predicts.
With E3, REE lives.

---

## Open Questions

None noted in preserved sources.

## Related Claims (IDs)

- ARC-003
- ARC-012
- ARC-001
- ARC-002
- ARC-004
- ARC-005
- INV-012

## References / Source Fragments

- `docs/processed/legacy_tree/docs/architecture/e3.md`
- `docs/processed/legacy_tree/architecture/E3.md`
